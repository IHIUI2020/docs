# 打包说明<a name="ZH-CN_TOPIC_0229243695"></a>

## 原理介绍<a name="zh-cn_topic_0184337290_section59131015104613"></a>

RPM打包的时候需要编译源码，需要把编译好的配置文件、二进制命令文件等放到合适的位置，还要根据需要对RPM的包进行测试，这些都需要先有一个“工作空间”。rpmbuild命令使用一套标准化的“工作空间”：

```
# rpmdev-setuptree
```

rpmdev-setuptree这个命令就是安装 rpmdevtools 带来的。可以看到运行了这个命令之后，在“/root“目录（非root用户为“/home/用户名“目录）下多了一个 rpmbuild 的文件夹，目录结构如下：

```
# tree rpmbuild
rpmbuild
├── BUILD
├── RPMS
├── SOURCES
├── SPECS
└── SRPMS
```

内容相关的说明如下：

<a name="zh-cn_topic_0184337290_table1268115913017"></a>
<table><thead align="left"><tr id="zh-cn_topic_0184337290_row673319549321"><th class="cellrowborder" valign="top" width="27.1%" id="mcps1.1.5.1.1"><p id="zh-cn_topic_0184337290_p1673485453210"><a name="zh-cn_topic_0184337290_p1673485453210"></a><a name="zh-cn_topic_0184337290_p1673485453210"></a><strong id="zh-cn_topic_0184337290_b215284143812"><a name="zh-cn_topic_0184337290_b215284143812"></a><a name="zh-cn_topic_0184337290_b215284143812"></a>目录</strong></p>
</th>
<th class="cellrowborder" valign="top" width="18.38%" id="mcps1.1.5.1.2"><p id="zh-cn_topic_0184337290_p167341354193219"><a name="zh-cn_topic_0184337290_p167341354193219"></a><a name="zh-cn_topic_0184337290_p167341354193219"></a><strong id="zh-cn_topic_0184337290_b151541483812"><a name="zh-cn_topic_0184337290_b151541483812"></a><a name="zh-cn_topic_0184337290_b151541483812"></a>宏代码</strong></p>
</th>
<th class="cellrowborder" valign="top" width="17.76%" id="mcps1.1.5.1.3"><p id="zh-cn_topic_0184337290_p157341854103211"><a name="zh-cn_topic_0184337290_p157341854103211"></a><a name="zh-cn_topic_0184337290_p157341854103211"></a><strong id="zh-cn_topic_0184337290_b121547463819"><a name="zh-cn_topic_0184337290_b121547463819"></a><a name="zh-cn_topic_0184337290_b121547463819"></a>名称</strong></p>
</th>
<th class="cellrowborder" valign="top" width="36.76%" id="mcps1.1.5.1.4"><p id="zh-cn_topic_0184337290_p1273465410328"><a name="zh-cn_topic_0184337290_p1273465410328"></a><a name="zh-cn_topic_0184337290_p1273465410328"></a><strong id="zh-cn_topic_0184337290_b191551414388"><a name="zh-cn_topic_0184337290_b191551414388"></a><a name="zh-cn_topic_0184337290_b191551414388"></a>功能</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0184337290_row107541059163020"><td class="cellrowborder" valign="top" width="27.1%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p675425913015"><a name="zh-cn_topic_0184337290_p675425913015"></a><a name="zh-cn_topic_0184337290_p675425913015"></a>~/rpmbuild/BUILD</p>
</td>
<td class="cellrowborder" valign="top" width="18.38%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p175405917305"><a name="zh-cn_topic_0184337290_p175405917305"></a><a name="zh-cn_topic_0184337290_p175405917305"></a>%_builddir</p>
</td>
<td class="cellrowborder" valign="top" width="17.76%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p1754175903010"><a name="zh-cn_topic_0184337290_p1754175903010"></a><a name="zh-cn_topic_0184337290_p1754175903010"></a>构建目录</p>
</td>
<td class="cellrowborder" valign="top" width="36.76%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p875415916306"><a name="zh-cn_topic_0184337290_p875415916306"></a><a name="zh-cn_topic_0184337290_p875415916306"></a>源码包被解压至此，并在该目录的子目录完成编译</p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row117541859183017"><td class="cellrowborder" valign="top" width="27.1%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p87541259163017"><a name="zh-cn_topic_0184337290_p87541259163017"></a><a name="zh-cn_topic_0184337290_p87541259163017"></a>~/rpmbuild/RPMS</p>
</td>
<td class="cellrowborder" valign="top" width="18.38%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p9754125913018"><a name="zh-cn_topic_0184337290_p9754125913018"></a><a name="zh-cn_topic_0184337290_p9754125913018"></a>%_rpmdir</p>
</td>
<td class="cellrowborder" valign="top" width="17.76%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p12754205963018"><a name="zh-cn_topic_0184337290_p12754205963018"></a><a name="zh-cn_topic_0184337290_p12754205963018"></a>标准 RPM 包目录</p>
</td>
<td class="cellrowborder" valign="top" width="36.76%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p177548599306"><a name="zh-cn_topic_0184337290_p177548599306"></a><a name="zh-cn_topic_0184337290_p177548599306"></a>生成/保存二进制 RPM 包</p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row88505117359"><td class="cellrowborder" valign="top" width="27.1%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p3753759173019"><a name="zh-cn_topic_0184337290_p3753759173019"></a><a name="zh-cn_topic_0184337290_p3753759173019"></a>~/rpmbuild/SOURCES</p>
</td>
<td class="cellrowborder" valign="top" width="18.38%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p9753185903013"><a name="zh-cn_topic_0184337290_p9753185903013"></a><a name="zh-cn_topic_0184337290_p9753185903013"></a>%_sourcedir</p>
</td>
<td class="cellrowborder" valign="top" width="17.76%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p10753135913308"><a name="zh-cn_topic_0184337290_p10753135913308"></a><a name="zh-cn_topic_0184337290_p10753135913308"></a>源代码目录</p>
</td>
<td class="cellrowborder" valign="top" width="36.76%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p675495933018"><a name="zh-cn_topic_0184337290_p675495933018"></a><a name="zh-cn_topic_0184337290_p675495933018"></a>保存源码包（如 .tar 包）和所有 patch 补丁</p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row1868513113357"><td class="cellrowborder" valign="top" width="27.1%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p3753135912308"><a name="zh-cn_topic_0184337290_p3753135912308"></a><a name="zh-cn_topic_0184337290_p3753135912308"></a>~/rpmbuild/SPECS</p>
</td>
<td class="cellrowborder" valign="top" width="18.38%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p147534598305"><a name="zh-cn_topic_0184337290_p147534598305"></a><a name="zh-cn_topic_0184337290_p147534598305"></a>%_specdir</p>
</td>
<td class="cellrowborder" valign="top" width="17.76%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p17753105910308"><a name="zh-cn_topic_0184337290_p17753105910308"></a><a name="zh-cn_topic_0184337290_p17753105910308"></a>Spec 文件目录</p>
</td>
<td class="cellrowborder" valign="top" width="36.76%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p4753125918302"><a name="zh-cn_topic_0184337290_p4753125918302"></a><a name="zh-cn_topic_0184337290_p4753125918302"></a>保存 RPM 包配置（.spec）文件</p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row275418594301"><td class="cellrowborder" valign="top" width="27.1%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p9754115973018"><a name="zh-cn_topic_0184337290_p9754115973018"></a><a name="zh-cn_topic_0184337290_p9754115973018"></a>~/rpmbuild/SRPMS</p>
</td>
<td class="cellrowborder" valign="top" width="18.38%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p14754559163011"><a name="zh-cn_topic_0184337290_p14754559163011"></a><a name="zh-cn_topic_0184337290_p14754559163011"></a>%_srcrpmdir</p>
</td>
<td class="cellrowborder" valign="top" width="17.76%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p7754115923010"><a name="zh-cn_topic_0184337290_p7754115923010"></a><a name="zh-cn_topic_0184337290_p7754115923010"></a>源代码 RPM 包目录</p>
</td>
<td class="cellrowborder" valign="top" width="36.76%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p10754165933017"><a name="zh-cn_topic_0184337290_p10754165933017"></a><a name="zh-cn_topic_0184337290_p10754165933017"></a>生成/保存源码 RPM 包(SRPM)</p>
</td>
</tr>
</tbody>
</table>

SPECS 下是RPM包的配置文件，是RPM打包的“图纸”，这个文件会告诉rpmbuild命令如何去打包。“宏代码”这一列就可以在SPEC文件中用来代指所对应的目录，类似于编程语言中的宏或全局变量。

## 打包流程<a name="zh-cn_topic_0184337290_section031173612466"></a>

打包的过程主要分为如下步骤：

1.  把源代码放到%\_sourcedir中。
2.  进行编译，编译的过程是在%\_builddir中完成的，一般情况下，源代码是压缩包格式，需要先进行解压。
3.  进行“安装”，类似于预先组装软件包，把软件包应该包含的内容（比如二进制文件、配置文件、man文档等）复制到%\_buildrootdir中，并按照实际安装后的目录结构组装，比如二进制命令可能会放在/usr/bin下，那么就在%\_buildrootdir下也按照同样的目录结构放置。
4.  做一些必要的配置，比如在实际安装前的准备，安装后的清理等等。这些都是通过配置在SPEC文件中来告诉rpmbuild命令。
5.  检查软件是否正常运行。
6.  生成的RPM包放置到%\_rpmdir，源码包放置到%\_srpmdir下。

在SPEC文件中的，各个阶段说明如下：

<a name="zh-cn_topic_0184337290_table14621920105410"></a>
<table><thead align="left"><tr id="zh-cn_topic_0184337290_row1416062025411"><th class="cellrowborder" valign="top" width="7.75077507750775%" id="mcps1.1.5.1.1"><p id="zh-cn_topic_0184337290_p141601200544"><a name="zh-cn_topic_0184337290_p141601200544"></a><a name="zh-cn_topic_0184337290_p141601200544"></a><strong id="zh-cn_topic_0184337290_b18160102005415"><a name="zh-cn_topic_0184337290_b18160102005415"></a><a name="zh-cn_topic_0184337290_b18160102005415"></a><span>阶段</span></strong></p>
</th>
<th class="cellrowborder" valign="top" width="13.931393139313933%" id="mcps1.1.5.1.2"><p id="zh-cn_topic_0184337290_p8160122017546"><a name="zh-cn_topic_0184337290_p8160122017546"></a><a name="zh-cn_topic_0184337290_p8160122017546"></a><strong id="zh-cn_topic_0184337290_b2016052095418"><a name="zh-cn_topic_0184337290_b2016052095418"></a><a name="zh-cn_topic_0184337290_b2016052095418"></a><span>读取的目录</span></strong></p>
</th>
<th class="cellrowborder" valign="top" width="10.391039103910392%" id="mcps1.1.5.1.3"><p id="zh-cn_topic_0184337290_p816015207540"><a name="zh-cn_topic_0184337290_p816015207540"></a><a name="zh-cn_topic_0184337290_p816015207540"></a><strong id="zh-cn_topic_0184337290_b18160920145418"><a name="zh-cn_topic_0184337290_b18160920145418"></a><a name="zh-cn_topic_0184337290_b18160920145418"></a><span>写入的目录</span></strong></p>
</th>
<th class="cellrowborder" valign="top" width="67.92679267926793%" id="mcps1.1.5.1.4"><p id="zh-cn_topic_0184337290_p1016072017548"><a name="zh-cn_topic_0184337290_p1016072017548"></a><a name="zh-cn_topic_0184337290_p1016072017548"></a><strong id="zh-cn_topic_0184337290_b1116032015420"><a name="zh-cn_topic_0184337290_b1116032015420"></a><a name="zh-cn_topic_0184337290_b1116032015420"></a><span>具体动作</span></strong></p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0184337290_row13160102085419"><td class="cellrowborder" valign="top" width="7.75077507750775%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p2160152017546"><a name="zh-cn_topic_0184337290_p2160152017546"></a><a name="zh-cn_topic_0184337290_p2160152017546"></a><span>%prep</span></p>
</td>
<td class="cellrowborder" valign="top" width="13.931393139313933%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p16160122010543"><a name="zh-cn_topic_0184337290_p16160122010543"></a><a name="zh-cn_topic_0184337290_p16160122010543"></a><span>%_sourcedir</span></p>
</td>
<td class="cellrowborder" valign="top" width="10.391039103910392%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p71609207547"><a name="zh-cn_topic_0184337290_p71609207547"></a><a name="zh-cn_topic_0184337290_p71609207547"></a><span>%_builddir</span></p>
</td>
<td class="cellrowborder" valign="top" width="67.92679267926793%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p1716017206546"><a name="zh-cn_topic_0184337290_p1716017206546"></a><a name="zh-cn_topic_0184337290_p1716017206546"></a><span>读取位于</span> <span>%_sourcedir</span> <span>目录的源代码和</span><span> patch </span><span>。之后，解压源代码至</span> <span>%_builddir</span> <span>的子目录并应用所有</span><span> patch</span><span>。</span></p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row14161122015418"><td class="cellrowborder" valign="top" width="7.75077507750775%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p13161172012545"><a name="zh-cn_topic_0184337290_p13161172012545"></a><a name="zh-cn_topic_0184337290_p13161172012545"></a><span>%build</span></p>
</td>
<td class="cellrowborder" valign="top" width="13.931393139313933%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p1416132055420"><a name="zh-cn_topic_0184337290_p1416132055420"></a><a name="zh-cn_topic_0184337290_p1416132055420"></a><span>%_builddir</span></p>
</td>
<td class="cellrowborder" valign="top" width="10.391039103910392%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p1116182015544"><a name="zh-cn_topic_0184337290_p1116182015544"></a><a name="zh-cn_topic_0184337290_p1116182015544"></a><span>%_builddir</span></p>
</td>
<td class="cellrowborder" valign="top" width="67.92679267926793%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p1216122017542"><a name="zh-cn_topic_0184337290_p1216122017542"></a><a name="zh-cn_topic_0184337290_p1216122017542"></a><span>编译位于</span> <span>%_builddir</span> <span>构建目录下的文件。通过执行类似</span> <span>./configure </span><span>&amp;</span><span>&amp;</span><span> make</span> <span>的命令实现。</span></p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row9161320155419"><td class="cellrowborder" valign="top" width="7.75077507750775%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p916162025419"><a name="zh-cn_topic_0184337290_p916162025419"></a><a name="zh-cn_topic_0184337290_p916162025419"></a><span>%install</span></p>
</td>
<td class="cellrowborder" valign="top" width="13.931393139313933%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p13161720135415"><a name="zh-cn_topic_0184337290_p13161720135415"></a><a name="zh-cn_topic_0184337290_p13161720135415"></a><span>%_builddir</span></p>
</td>
<td class="cellrowborder" valign="top" width="10.391039103910392%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p13161192085414"><a name="zh-cn_topic_0184337290_p13161192085414"></a><a name="zh-cn_topic_0184337290_p13161192085414"></a><span>%_buildrootdir</span></p>
</td>
<td class="cellrowborder" valign="top" width="67.92679267926793%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p1216162011546"><a name="zh-cn_topic_0184337290_p1216162011546"></a><a name="zh-cn_topic_0184337290_p1216162011546"></a><span>读取位于</span> <span>%_builddir</span> <span>构建目录下的文件并将其安装至</span> <span>%_buildrootdir</span> <span>目录。这些文件就是用户安装</span><span> RPM </span><span>后，最终得到的文件。</span></p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row5161172035417"><td class="cellrowborder" valign="top" width="7.75077507750775%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p2161132065410"><a name="zh-cn_topic_0184337290_p2161132065410"></a><a name="zh-cn_topic_0184337290_p2161132065410"></a><span>%check</span></p>
</td>
<td class="cellrowborder" valign="top" width="13.931393139313933%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p4161162010548"><a name="zh-cn_topic_0184337290_p4161162010548"></a><a name="zh-cn_topic_0184337290_p4161162010548"></a><span>%_builddir</span></p>
</td>
<td class="cellrowborder" valign="top" width="10.391039103910392%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p18161202019544"><a name="zh-cn_topic_0184337290_p18161202019544"></a><a name="zh-cn_topic_0184337290_p18161202019544"></a><span>%_builddir</span></p>
</td>
<td class="cellrowborder" valign="top" width="67.92679267926793%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p15161152013541"><a name="zh-cn_topic_0184337290_p15161152013541"></a><a name="zh-cn_topic_0184337290_p15161152013541"></a><span>检查软件是否正常运行。通过执行类似</span> <span>make test</span> <span>的命令实现。</span></p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row19161202035419"><td class="cellrowborder" valign="top" width="7.75077507750775%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p111617208547"><a name="zh-cn_topic_0184337290_p111617208547"></a><a name="zh-cn_topic_0184337290_p111617208547"></a><span>bin</span></p>
</td>
<td class="cellrowborder" valign="top" width="13.931393139313933%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p161613204544"><a name="zh-cn_topic_0184337290_p161613204544"></a><a name="zh-cn_topic_0184337290_p161613204544"></a><span>%_buildrootdir</span></p>
</td>
<td class="cellrowborder" valign="top" width="10.391039103910392%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p141611120175410"><a name="zh-cn_topic_0184337290_p141611120175410"></a><a name="zh-cn_topic_0184337290_p141611120175410"></a><span>%_rpmdir</span></p>
</td>
<td class="cellrowborder" valign="top" width="67.92679267926793%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p12161162018541"><a name="zh-cn_topic_0184337290_p12161162018541"></a><a name="zh-cn_topic_0184337290_p12161162018541"></a><span>读取位于</span> <span>%_buildrootdir</span> <span>最终安装目录下的文件，以便最终在</span> <span>%_rpmdir</span> <span>目录下创建</span><span> RPM </span><span>包。在该目录下，不同架构的</span><span> RPM </span><span>包会分别保存至不同子目录，</span> <span>noarch</span> <span>目录保存适用于所有架构的</span><span> RPM </span><span>包。这些</span><span> RPM </span><span>文件就是用户最终安装的</span><span> RPM </span><span>包。</span></p>
</td>
</tr>
<tr id="zh-cn_topic_0184337290_row416213208540"><td class="cellrowborder" valign="top" width="7.75077507750775%" headers="mcps1.1.5.1.1 "><p id="zh-cn_topic_0184337290_p1416262085419"><a name="zh-cn_topic_0184337290_p1416262085419"></a><a name="zh-cn_topic_0184337290_p1416262085419"></a><span>src</span></p>
</td>
<td class="cellrowborder" valign="top" width="13.931393139313933%" headers="mcps1.1.5.1.2 "><p id="zh-cn_topic_0184337290_p716282015541"><a name="zh-cn_topic_0184337290_p716282015541"></a><a name="zh-cn_topic_0184337290_p716282015541"></a><span>%_sourcedir</span></p>
</td>
<td class="cellrowborder" valign="top" width="10.391039103910392%" headers="mcps1.1.5.1.3 "><p id="zh-cn_topic_0184337290_p17162142010547"><a name="zh-cn_topic_0184337290_p17162142010547"></a><a name="zh-cn_topic_0184337290_p17162142010547"></a><span>%_srcrpmdir</span></p>
</td>
<td class="cellrowborder" valign="top" width="67.92679267926793%" headers="mcps1.1.5.1.4 "><p id="zh-cn_topic_0184337290_p2162182011543"><a name="zh-cn_topic_0184337290_p2162182011543"></a><a name="zh-cn_topic_0184337290_p2162182011543"></a><span>创建源码</span><span> RPM </span><span>包（简称</span><span> SRPM</span><span>，以</span><span>.src.rpm</span> <span>作为后缀名），并保存至</span> <span>%_srcrpmdir</span> <span>目录。</span><span>SRPM </span><span>包通常用于审核和升级软件包。</span></p>
</td>
</tr>
</tbody>
</table>

## 打包选项<a name="section1143714431290"></a>

通过rpmbuild命令构建软件包。rpmbuild构建软件包一般可以通过构建SPEC文件、tar文件、source文件实现。

rpmbuild命令格式为：rpmbuild \[_option_...\]

常用的rpmbuild打包选项如[表1](#table1342946175212)所示。

**表 1**  rpmbuild打包选项

<a name="table1342946175212"></a>
<table><thead align="left"><tr id="row1242184611523"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p1142134616527"><a name="p1142134616527"></a><a name="p1142134616527"></a><em id="i196115187577"><a name="i196115187577"></a><a name="i196115187577"></a>option</em>取值</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p174244605210"><a name="p174244605210"></a><a name="p174244605210"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1642124685214"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p44294645211"><a name="p44294645211"></a><a name="p44294645211"></a>-bp <em id="i142674211316"><a name="i142674211316"></a><a name="i142674211316"></a>specfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p5504192417282"><a name="p5504192417282"></a><a name="p5504192417282"></a>从<em id="i276214508223"><a name="i276214508223"></a><a name="i276214508223"></a>specfile</em>文件的%prep段开始构建（解开源码包并打补丁）。</p>
</td>
</tr>
<tr id="row375616513198"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p663152652313"><a name="p663152652313"></a><a name="p663152652313"></a>-bc <em id="i17281843152313"><a name="i17281843152313"></a><a name="i17281843152313"></a>specfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1475675181912"><a name="p1475675181912"></a><a name="p1475675181912"></a>从<em id="i11191112514"><a name="i11191112514"></a><a name="i11191112514"></a>specfile</em>文件的%build段开始构建。</p>
</td>
</tr>
<tr id="row3421646125214"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p143521654132516"><a name="p143521654132516"></a><a name="p143521654132516"></a>-bi <em id="i1312330192911"><a name="i1312330192911"></a><a name="i1312330192911"></a>specfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p134949360269"><a name="p134949360269"></a><a name="p134949360269"></a>从<em id="i8494173617262"><a name="i8494173617262"></a><a name="i8494173617262"></a>specfile</em>文件的%install段开始构建。</p>
</td>
</tr>
<tr id="row642846145211"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1342746115211"><a name="p1342746115211"></a><a name="p1342746115211"></a>-bl <em id="i1654526296"><a name="i1654526296"></a><a name="i1654526296"></a>specfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p14710104517231"><a name="p14710104517231"></a><a name="p14710104517231"></a>从<em id="i793315305278"><a name="i793315305278"></a><a name="i793315305278"></a>specfile</em>文件的%file段开始检查。</p>
</td>
</tr>
<tr id="row2428463528"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p56839482271"><a name="p56839482271"></a><a name="p56839482271"></a>-ba <em id="i182405318294"><a name="i182405318294"></a><a name="i182405318294"></a>specfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1983024422919"><a name="p1983024422919"></a><a name="p1983024422919"></a><span>通过</span><em id="i622172017295"><a name="i622172017295"></a><a name="i622172017295"></a>specfile</em><span>文件构建源码包和二进制包。</span></p>
</td>
</tr>
<tr id="row176441743349"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p176441749342"><a name="p176441749342"></a><a name="p176441749342"></a>-bb <em id="i1815358294"><a name="i1815358294"></a><a name="i1815358294"></a>specfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p26440463410"><a name="p26440463410"></a><a name="p26440463410"></a><span>通过</span><em id="i1950512552910"><a name="i1950512552910"></a><a name="i1950512552910"></a>specfile</em><span>文件构建二进制包</span>。</p>
</td>
</tr>
<tr id="row143691297164"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p913185619293"><a name="p913185619293"></a><a name="p913185619293"></a>-bs <em id="i18577144710301"><a name="i18577144710301"></a><a name="i18577144710301"></a>specfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p8707203214307"><a name="p8707203214307"></a><a name="p8707203214307"></a><span>通过</span><em id="i99441330193010"><a name="i99441330193010"></a><a name="i99441330193010"></a>specfile</em><span>文件构建源码包。</span></p>
</td>
</tr>
<tr id="row1399650113119"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p6756203383111"><a name="p6756203383111"></a><a name="p6756203383111"></a>-rp <em id="i18757173312312"><a name="i18757173312312"></a><a name="i18757173312312"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p11757183311317"><a name="p11757183311317"></a><a name="p11757183311317"></a>从<em id="i197751147153619"><a name="i197751147153619"></a><a name="i197751147153619"></a>sourcefile</em>文件的%prep段开始构建（解开源码包并打补丁）。</p>
</td>
</tr>
<tr id="row114161423119"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p2757183312313"><a name="p2757183312313"></a><a name="p2757183312313"></a>-rc <em id="i7716153183620"><a name="i7716153183620"></a><a name="i7716153183620"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p67571733133114"><a name="p67571733133114"></a><a name="p67571733133114"></a>从<em id="i9194650163619"><a name="i9194650163619"></a><a name="i9194650163619"></a>sourcefile</em>文件的%build段开始构建。</p>
</td>
</tr>
<tr id="row1787181019319"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1275773373119"><a name="p1275773373119"></a><a name="p1275773373119"></a>-ri <em id="i1963616335362"><a name="i1963616335362"></a><a name="i1963616335362"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p0757143320319"><a name="p0757143320319"></a><a name="p0757143320319"></a>从<em id="i196145217369"><a name="i196145217369"></a><a name="i196145217369"></a>sourcefile</em>文件的%install段开始构建。</p>
</td>
</tr>
<tr id="row0937171213317"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p167579334315"><a name="p167579334315"></a><a name="p167579334315"></a>-rl <em id="i1483914353366"><a name="i1483914353366"></a><a name="i1483914353366"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p12757933103117"><a name="p12757933103117"></a><a name="p12757933103117"></a>从<em id="i666418540369"><a name="i666418540369"></a><a name="i666418540369"></a>sourcefile</em>文件的%file段开始检查。</p>
</td>
</tr>
<tr id="row15609181543116"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p167572332315"><a name="p167572332315"></a><a name="p167572332315"></a>-ra <em id="i195041839133617"><a name="i195041839133617"></a><a name="i195041839133617"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1475713334313"><a name="p1475713334313"></a><a name="p1475713334313"></a><span>通过</span><em id="i11175457133613"><a name="i11175457133613"></a><a name="i11175457133613"></a>sourcefile</em><span>文件构建源码包和二进制包。</span></p>
</td>
</tr>
<tr id="row346418223315"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1875753320313"><a name="p1875753320313"></a><a name="p1875753320313"></a>-rb <em id="i9950941153618"><a name="i9950941153618"></a><a name="i9950941153618"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p675783333115"><a name="p675783333115"></a><a name="p675783333115"></a><span>通过</span><em id="i13566059153619"><a name="i13566059153619"></a><a name="i13566059153619"></a>sourcefile</em><span>文件构建二进制包</span>。</p>
</td>
</tr>
<tr id="row4848131918311"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p187575336317"><a name="p187575336317"></a><a name="p187575336317"></a>-rs <em id="i5943643133613"><a name="i5943643133613"></a><a name="i5943643133613"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p12757123383112"><a name="p12757123383112"></a><a name="p12757123383112"></a><span>通过</span><em id="i6891141113712"><a name="i6891141113712"></a><a name="i6891141113712"></a>sourcefile</em><span>文件构建源码包。</span></p>
</td>
</tr>
<tr id="row24008816315"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1864848133917"><a name="p1864848133917"></a><a name="p1864848133917"></a>-tp <em id="i1164815843917"><a name="i1164815843917"></a><a name="i1164815843917"></a>tarfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1664812814397"><a name="p1664812814397"></a><a name="p1664812814397"></a>从<em id="i10204153654013"><a name="i10204153654013"></a><a name="i10204153654013"></a>tarfile</em>文件的%prep段开始构建（解开源码包并打补丁）。</p>
</td>
</tr>
<tr id="row73977115386"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p7648168153911"><a name="p7648168153911"></a><a name="p7648168153911"></a>-tc <em id="i352342324018"><a name="i352342324018"></a><a name="i352342324018"></a>tarfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p664808173911"><a name="p664808173911"></a><a name="p664808173911"></a>从<em id="i1299733764014"><a name="i1299733764014"></a><a name="i1299733764014"></a>tarfile</em>文件的%build段开始构建。</p>
</td>
</tr>
<tr id="row1867693203810"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1464911811392"><a name="p1464911811392"></a><a name="p1464911811392"></a>-ti <em id="i50102611402"><a name="i50102611402"></a><a name="i50102611402"></a>tarfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p764910818397"><a name="p764910818397"></a><a name="p764910818397"></a>从<em id="i68861339114018"><a name="i68861339114018"></a><a name="i68861339114018"></a>tarfile</em>文件的%install段开始构建。</p>
</td>
</tr>
<tr id="row1831910143813"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p176494814391"><a name="p176494814391"></a><a name="p176494814391"></a>-ta <em id="i1598822734013"><a name="i1598822734013"></a><a name="i1598822734013"></a>tarfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1164938153915"><a name="p1164938153915"></a><a name="p1164938153915"></a><span>通过</span><em id="i5555114184019"><a name="i5555114184019"></a><a name="i5555114184019"></a>tarfile</em><span>文件构建源码包和二进制包。</span></p>
</td>
</tr>
<tr id="row16858111273820"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p964912883913"><a name="p964912883913"></a><a name="p964912883913"></a>-tb <em id="i1985417296405"><a name="i1985417296405"></a><a name="i1985417296405"></a>tarfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1564916811399"><a name="p1564916811399"></a><a name="p1564916811399"></a><span>通过</span><em id="i1033434614408"><a name="i1033434614408"></a><a name="i1033434614408"></a>tarfile</em><span>文件构建二进制包</span>。</p>
</td>
</tr>
<tr id="row163391515123813"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p176495811391"><a name="p176495811391"></a><a name="p176495811391"></a>-ts <em id="i990815311403"><a name="i990815311403"></a><a name="i990815311403"></a>tarfile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p56490810392"><a name="p56490810392"></a><a name="p56490810392"></a><span>通过</span><em id="i3924248114020"><a name="i3924248114020"></a><a name="i3924248114020"></a>tarfile</em><span>文件构建源码包。</span></p>
</td>
</tr>
<tr id="row2443719144118"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p7444191984111"><a name="p7444191984111"></a><a name="p7444191984111"></a>--buildroot=<em id="i39711271427"><a name="i39711271427"></a><a name="i39711271427"></a>DIRECTORY</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p553719220506"><a name="p553719220506"></a><a name="p553719220506"></a>在构建时，使用<em id="i1820717188507"><a name="i1820717188507"></a><a name="i1820717188507"></a>DIRECTORY</em>目录覆盖默认的/root目录。</p>
</td>
</tr>
<tr id="row1794104355716"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p5941184375717"><a name="p5941184375717"></a><a name="p5941184375717"></a>--clean</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1094144315577"><a name="p1094144315577"></a><a name="p1094144315577"></a>完成打包后清除BUILD目录下的文件。</p>
</td>
</tr>
<tr id="row12405112795814"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p440562735814"><a name="p440562735814"></a><a name="p440562735814"></a>--nobuild</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p0405182714588"><a name="p0405182714588"></a><a name="p0405182714588"></a>不执行任何实际的构建步骤。可用于测试spec文件。</p>
</td>
</tr>
<tr id="row10784164615815"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1784154655815"><a name="p1784154655815"></a><a name="p1784154655815"></a>--noclean</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p57851946185814"><a name="p57851946185814"></a><a name="p57851946185814"></a>不执行spec文件的"%clean"阶段(即使它确实存在)。</p>
</td>
</tr>
<tr id="row5585102605911"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p10585132665911"><a name="p10585132665911"></a><a name="p10585132665911"></a>--nocheck</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p85851226135913"><a name="p85851226135913"></a><a name="p85851226135913"></a>不执行spec文件的"%check"阶段(即使它确实存在)。</p>
</td>
</tr>
<tr id="row6577145616591"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p7577165625910"><a name="p7577165625910"></a><a name="p7577165625910"></a>--dbpath <em id="i20573371107"><a name="i20573371107"></a><a name="i20573371107"></a>DIRECTORY</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p16578456185911"><a name="p16578456185911"></a><a name="p16578456185911"></a>使用<em id="i194539583018"><a name="i194539583018"></a><a name="i194539583018"></a>DIRECTORY</em>中的数据库，而不是默认的 /var/lib/rpm。</p>
</td>
</tr>
<tr id="row1424515812017"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p132451184010"><a name="p132451184010"></a><a name="p132451184010"></a>--root <em id="i1163110211911"><a name="i1163110211911"></a><a name="i1163110211911"></a>DIRECTORY</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1424548908"><a name="p1424548908"></a><a name="p1424548908"></a>使<em id="i1034445918119"><a name="i1034445918119"></a><a name="i1034445918119"></a>DIRECTORY</em>为最高级别的路径，默认为“/”为最高路径。</p>
</td>
</tr>
<tr id="row2477041403"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1247744907"><a name="p1247744907"></a><a name="p1247744907"></a>--rebuild <em id="i45014485219"><a name="i45014485219"></a><a name="i45014485219"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p2477747013"><a name="p2477747013"></a><a name="p2477747013"></a>将安装指定的源代码包<em id="i128666361454"><a name="i128666361454"></a><a name="i128666361454"></a>sourcefile</em>，然后进行准备、编译、安装。</p>
</td>
</tr>
<tr id="row15893211013"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p168931212018"><a name="p168931212018"></a><a name="p168931212018"></a>--recompile <em id="i182834913220"><a name="i182834913220"></a><a name="i182834913220"></a>sourcefile</em></p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p113161298620"><a name="p113161298620"></a><a name="p113161298620"></a>在 --recompile 的基础上额外构建一个新的二进制包。在构建结束时，构建目录、源代码和 spec 文件都将被删除。</p>
<p id="p39465919516"><a name="p39465919516"></a><a name="p39465919516"></a>将被删除(就好像用了 --clean)，</p>
</td>
</tr>
<tr id="row1783829436"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p198332910318"><a name="p198332910318"></a><a name="p198332910318"></a>-?，--help</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p108312912320"><a name="p108312912320"></a><a name="p108312912320"></a>打印详细的帮助信息。</p>
</td>
</tr>
<tr id="row1123916251135"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p1023913255315"><a name="p1023913255315"></a><a name="p1023913255315"></a>--version</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p1923952518312"><a name="p1923952518312"></a><a name="p1923952518312"></a>打印详细的版本信息。</p>
</td>
</tr>
</tbody>
</table>

