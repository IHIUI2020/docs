# 构建已有软件包<a name="ZH-CN_TOPIC_0229243721"></a>

**创建工程**

1.  通过拷贝已有工程，创建属于用户自己的子工程。例如将openEuler:Mainline工程下的zlib软件包到新分支，参考命令如下：

    ```
    # osc branch openEuler:Mainline zlib
    ```

    回显如下所示，说明在用户testUser下创建了新的分支工程home:testUser:branches:openEuler:Mainline。

    ```
    A working copy of the branched package can be checked out with:
    osc co home:testUser:branches:openEuler:Mainline/zlib
    ```

2.  将需要修改软件包的相关配置文件（例如\_service）下载到本地当前路径。其中  _testUser_  为\~/.oscrc配置文件中配置的账户名称，请根据实际情况修改。

    ```
    # osc co home:testUser:branches:openEuler:Mainline/zlib
    ```

    回显如下所示：

    ```
    A    home:testUser:branches:openEuler:Mainline
    A    home:testUser:branches:openEuler:Mainline/zlib
    A    home:testUser:branches:openEuler:Mainline/zlib/_service
    ```

3.  进入本地子工程目录，并将软件包远程代码同步到本地。

    ```
    # cd home:testUser:branches:openEuler:Mainline/zlib
    # osc up -S
    ```

    回显如下所示：

    ```
    A    _service:tar_scm_kernel_repo:0001-Neon-Optimized-hash-chain-rebase.patch
    A    _service:tar_scm_kernel_repo:0002-Porting-optimized-longest_match.patch
    A    _service:tar_scm_kernel_repo:0003-arm64-specific-build-patch.patch
    A    _service:tar_scm_kernel_repo:zlib-1.2.11-optimized-s390.patch
    A    _service:tar_scm_kernel_repo:zlib-1.2.11.tar.xz
    A    _service:tar_scm_kernel_repo:zlib-1.2.5-minizip-fixuncrypt.patch
    A    _service:tar_scm_kernel_repo:zlib.spec
    ```


**构建RPM包**

1.  重命名源文件，然后将重命名后的源文件添加到OBS暂存中。

    ```
    # rm -f _service;for file in `ls | grep -v .osc`;do new_file=${file##*:};mv $file $new_file;done
    # osc addremove *
    ```

2.  修改源代码和spec文件，并将对应软件包的所有修改同步到OBS服务器。参考命令如下，-m参数后的信息为提交记录。

    ```
    # osc ci -m "commit log"
    ```

3.  获取当前工程的仓库名称和架构，参考命令如下：

    ```
    # osc repos home:testUser:branches:openEuler:Mainline
    ```

4.  修改提交成功后，OBS会自动开始编译软件包。可以通过如下命令，查看对应仓库的编译日志，其中  _standard\_aarch64_ _、_ _aarch64_  分别为查询所得仓库名称和架构。

    ```
    # osc buildlog standard_aarch64  aarch64
    ```

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >用户也可以通过网页端打开自己创建的对应工程，查看构建日志。  


