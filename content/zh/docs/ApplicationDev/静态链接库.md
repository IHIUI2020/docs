# 静态链接库<a name="ZH-CN_TOPIC_0229243727"></a>

创建一个静态链接库，需要先将源文件编译为目标文件，然后在使用ar命令将目标文件打包成静态链接库。

示例：将源文件test1.c，test2.c，test3.c编译并打包成静态库。

```
gcc -c test1.c test2.c test3.c
ar rcs libtest.a test1.o test2.o test3.o
```

其中ar是一个备份压缩命令，可以将多个文件打包成一个备份文件（也叫归档文件），也可以从备份文件中提取成员文件。ar最常见的用法是将目标文件打包为静态链接库。

ar将目标文件打包成静态链接库的命令格式为：

ar rcs 静态库文件名 目标文件列表

-   r： 替换库中已有的目标文件，或者加入新的目标文件。
-   c： 创建一个库，不管库否存在，都将创建。
-   s： 创建目标文件索引，在创建较大的库时能提高速度。

示例：创建一个main.c文件来使用静态库

```
gcc main.c -L libraryDIR -ltest -o test.out
```

其中libraryDIR为libtest.a库的路径。

