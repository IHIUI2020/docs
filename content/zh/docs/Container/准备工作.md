# 准备工作<a name="ZH-CN_TOPIC_0184808218"></a>

1.  版本获取。请从[华为云官网](https://support.huawei.com)获取EulerOS docker版本，包含两个软件包：
    -   docker-engine-\*.rpm : docker的rpm包
    -   docker-engine-selinux-\*.noarch.rpm : euleros docker的selinux策略

2.  环境检查。确保环境符合升级条件：
    -   请确认环境中所部属的docker版本为EulerOS版本：执行“docker version”能看到具体版本号。
    -   请确认版本号小于所期望升级至的版本号。
    -   请确认当前环境包含“rpm”或“yum”指令，并且它们工作正常。

        >![](public_sys-resources/icon-note.gif) **说明：**   
        >docker-1.11检查UnicornVersion版本号  
        >docker-18.09检查EulerVersion版本号  


3.  配置检查。检查docker daemon进程目前的配置是否打开了“Live Restore”，执行“docker info”查看“Live Restore Enabled”是否为true。
    -   当此项为true，则重启docker daemon时不会关闭当前正在运行的容器；
    -   否则，重启docker daemon过程中会关闭所有容器。


以上检查通过后，可以开始升级，但我们仍然建议在升级前，通过容器编排系统将当前节点上的所有业务容器驱逐到集群的其它节点，以免因为docker daemon重启过程中的服务间断导致部分业务容器健康检查失败。

升级前请先备份docker的配置文件，升级后请检查升级前后配置文件是否一致：

1.  /etc/sysconfig/docker
2.  /etc/docker/daemon.json （如果环境上没有这个文件，则可以忽略）

