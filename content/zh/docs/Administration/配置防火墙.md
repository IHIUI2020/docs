# 配置防火墙<a name="ZH-CN_TOPIC_0186587993"></a>

## 概述<a name="section10117154220343"></a>

如果需要将FTP开放给Internet使用，需要开放防火墙。用户可以通过修改配置文件，对防火墙进行设置。

FTP的防火墙可能需要进行如下设置：

-   加入iptables的ip\_nat\_ftp和ip\_conntrack\_ftp两个模块。
-   开放端口21给Internet使用。
-   开放端口65400\~65410给Internet连接使用。

## 操作步骤<a name="section2674135019345"></a>

1.  打开iptables的配置文件，加入ip\_nat\_ftp和ip\_conntrack\_ftp模块后，保存关闭文件。

    ```
    # vim /etc/sysconfig/iptables-config
    ```

    添加的内容如下：

    ```
    IPTABLES_MODULES="ip_nat_ftp  ip_conntrack_ftp"
    ```

2.  重启**firewalld**服务。

    ```
    # systemctl restart firewalld
    ```

3.  打开iptables规格文件，加入端口信息。

    ```
    # vim /usr/local/virus/iptables/iptables.rule
    ```

    添加的内容如下：

    ```
    iptables -A INPUT -p TCP -i $EXTIF --dport 65400:65410 --sport 1024:65534 -j ACCEPT
    ```


