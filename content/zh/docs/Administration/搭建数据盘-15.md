# 搭建数据盘<a name="ZH-CN_TOPIC_0230704896"></a>

>![](public_sys-resources/icon-note.gif) **说明：**   
>-   进行性能测试时，数据目录使用单独硬盘，需要对硬盘进行格式化并挂载，参考方法一或者方法二  
>-   非性能测试时，执行以下命令，创建数据目录即可。然后跳过本小节：  
>    \#mkdir /data  

## 方法一：使用fdisk进行磁盘管理<a name="section113751451193718"></a>

1.  创建分区（以/dev/sdb为例，根据实际情况创建）

    ```
    #fdisk /dev/sdb
    ```

2.  输入n，按回车确认。
3.  输入p，按回车确认。
4.  输入1，按回车确认。
5.  采用默认配置，按回车确认。
6.  采用默认配置，按回车确认。
7.  输入w，按回车保存。
8.  创建文件系统（以xfs为例，根据实际需求创建文件系统）

    ```
    #mkfs.xfs /dev/sdb1
    ```

9.  挂载分区到“/data”以供操作系统使用。

    ```
    #mkdir /data
    ```

    ```
    #mount /dev/sdb1 /data
    ```

10. 执行命令“vi /etc/fstab", 编辑“/etc/fstab”使重启后自动挂载数据盘。如下图中，添加最后一行内容。

    其中，/dev/nvme0n1p1为示例，具体名称以实际情况为准。

    ![](figures/搭建数据盘.png)


## 方法二：使用LVM进行磁盘管理<a name="section136055113814"></a>

>![](public_sys-resources/icon-note.gif) **说明：**   
>此步骤需要安装镜像中的lvm2相关包，步骤如下：  
>1.  配置本地yum源，详细信息请参考“搭建服务 \> 搭建repo服务器”章节。如果已经执行，则可跳过此步。  
>2.  执行命令安装lvm2。  
>    **\#yum install lvm2**  

1.  创建物理卷（sdb为硬盘名称，具体名字以实际为准）。

    ```
    #pvcreate /dev/sdb
    ```

2.  创建物理卷组（其中datavg为创建的卷组名称，具体名字以实际规划为准）。

    ```
    #vgcreate datavg  /dev/sdb
    ```

3.  创建逻辑卷（其中600G为规划的逻辑卷大小，具体大小以实际情况为准；datalv为创建的逻辑卷的名字，具体名称以实际规划为准。\)。

    ```
    #lvcreate -L 600G -n datalv datavg
    ```

4.  创建文件系统。

    ```
    #mkfs.xfs /dev/datavg/datalv
    ```

5.  创建数据目录并挂载。

    ```
    #mkdir /data
    ```

    ```
    #mount /dev/datavg/datalv /data
    ```

6.  执行命令**vi /etc/fstab**，编辑“/etc/fstab”使重启后自动挂载数据盘。如下图中，添加最后一行内容。

    其中，/dev/datavg/datalv为示例，具体名称以实际情况为准。

    ![](figures/D1376B2A-D036-41C4-B852-E8368F363B5E.png)


